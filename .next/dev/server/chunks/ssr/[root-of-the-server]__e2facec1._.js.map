{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MIGUEL/Desktop/SouKore/Sistema/components/ui/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/ProductCard.tsx <module evaluation>\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,+DACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MIGUEL/Desktop/SouKore/Sistema/components/ui/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/ProductCard.tsx\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,2CACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MIGUEL/Desktop/SouKore/Sistema/components/auth/SignOutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SignOutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SignOutButton() from the server but SignOutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/auth/SignOutButton.tsx <module evaluation>\",\n    \"SignOutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,mEACA","ignoreList":[0]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MIGUEL/Desktop/SouKore/Sistema/components/auth/SignOutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SignOutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SignOutButton() from the server but SignOutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/auth/SignOutButton.tsx\",\n    \"SignOutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,+CACA","ignoreList":[0]}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MIGUEL/Desktop/SouKore/Sistema/app/dashboard/page.tsx"],"sourcesContent":["import { ProductCard } from '@/components/ui/ProductCard'\nimport { SignOutButton } from '@/components/auth/SignOutButton'\nimport { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { ProductRow, UserAccessRow } from '@/types/db'\n\nexport const dynamic = 'force-dynamic'\nexport const revalidate = 0\n\nexport default async function DashboardPage() {\n  const cookieStore = await cookies()\n  const baseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\n  const normalizeImageUrl = (u: string) => {\n    try {\n      if (!u) return ''\n      if (u.startsWith('http://') || u.startsWith('https://')) return u\n      return new URL(u, baseUrl).toString()\n    } catch {\n      return u\n    }\n  }\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL || '',\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '',\n    {\n      cookies: {\n        get(name) {\n          return cookieStore.get(name)?.value\n        },\n        set() {},\n        remove() {},\n      },\n    }\n  )\n\n  let user: { id: string } | null = null\n  try {\n    const { data: userData, error: errorUser } = await supabase.auth.getUser()\n    console.log('SSR getUser error:', errorUser?.message)\n    user = userData.user ?? null\n  } catch (e) {\n    console.log('SSR getUser exception:', (e as any)?.message)\n  }\n\n  let products: ProductRow[] = []\n  try {\n    const { data: productsData, error: productsError } = await supabase\n      .from('products')\n      .select('*')\n      .eq('is_active', true)\n    console.log('Products data count:', productsData?.length ?? 0)\n    console.log('Erro Products:', productsError?.message)\n    products = (productsData ?? []) as ProductRow[]\n  } catch (e) {\n    console.log('Products fetch exception:', (e as any)?.message)\n    products = []\n  }\n\n  let access: UserAccessRow[] = []\n  try {\n    if (user?.id) {\n      const { data: accessData, error: errorAccess } = await supabase\n        .from('user_access')\n        .select('product_id, user_id')\n        .eq('user_id', user.id)\n      console.log('Access data count:', accessData?.length ?? 0)\n      console.log('Erro Access:', errorAccess?.message)\n      access = (accessData ?? []) as UserAccessRow[]\n    } else {\n      console.log('No user; treating access as empty')\n      access = []\n    }\n  } catch (e) {\n    console.log('Access fetch exception:', (e as any)?.message)\n    access = []\n  }\n\n  const accessIds = new Set(access.map((a) => a.product_id))\n  const unlockedProducts = accessIds.size > 0 ? products.filter((p) => accessIds.has(p.id)) : []\n  const lockedProducts = accessIds.size > 0 ? products.filter((p) => !accessIds.has(p.id)) : products\n\n  return (\n    <main className=\"container space-y-10 pb-20\">\n      <header className=\"sticky top-0 z-40 bg-background/70 backdrop-blur border-b border-border\">\n        <div className=\"flex items-center justify-between py-3\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"inline-flex size-8 items-center justify-center rounded-md bg-panel brand-border\">SK</span>\n            <span className=\"font-display\">SouKore</span>\n          </div>\n          <nav className=\"hidden sm:flex items-center gap-4 text-sm\">\n            <a href=\"/\" className=\"hover:text-white\">Início</a>\n            <a href=\"/dashboard\" className=\"text-white\">Meus Protocolos</a>\n            <a href=\"#\" className=\"hover:text-white\">Configurações</a>\n          </nav>\n          <SignOutButton />\n        </div>\n      </header>\n\n      <section className=\"space-y-6\">\n        <h2 className=\"font-display text-xl\">Seus Protocolos</h2>\n        {unlockedProducts.length === 0 ? (\n          <p className=\"text-sm text-text-secondary\">Nenhum protocolo liberado ainda.</p>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {unlockedProducts.map((p) => (\n              <ProductCard\n                key={p.id}\n                title={p.title}\n                description={p.description}\n                imageUrl={normalizeImageUrl(p.image_url)}\n                primaryHref={`/p/${p.slug}`}\n                primaryLabel=\"Acessar Conteúdo\"\n              />\n            ))}\n          </div>\n        )}\n      </section>\n\n      <section className=\"space-y-6\">\n        <h2 className=\"font-display text-xl\">Suba de Nível</h2>\n        <p className=\"text-sm text-text-secondary\">\n          Conteúdos bloqueados. Passe o mouse para destacar e destravar.\n        </p>\n        {lockedProducts.length === 0 ? (\n          <p className=\"text-sm text-text-secondary\">Nenhum protocolo disponível para desbloqueio.</p>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {lockedProducts.map((p) => (\n              <ProductCard\n                key={p.id}\n                title={p.title}\n                description={p.description}\n                imageUrl={normalizeImageUrl(p.image_url)}\n                locked\n                lockedLabel=\"Desbloquear\"\n              />\n            ))}\n          </div>\n        )}\n      </section>\n    </main>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}